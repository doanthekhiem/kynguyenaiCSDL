# US-PS-005 - Thu há»“i lá»i má»i

## User story Title
US-PS-005 - Thu há»“i lá»i má»i (Revoke Invitation)

LÃ  má»™t **School Admin cá»§a trÆ°á»ng tÆ°**

TÃ´i muá»‘n thá»±c hiá»‡n **thu há»“i (revoke) lá»i má»i Ä‘Ã£ gá»­i cho giÃ¡o viÃªn** táº¡i **trang View Invitations cá»§a sáº£n pháº©m LMS**

Äá»ƒ **há»§y bá» invitation khi cáº§n thay Ä‘á»•i káº¿ hoáº¡ch, hoáº·c khi giÃ¡o viÃªn khÃ´ng phÃ¹ há»£p, hoáº·c khi cáº§n Ä‘iá»u chá»‰nh Ä‘á»™i ngÅ© giáº£ng dáº¡y trÆ°á»›c khi course Ä‘Æ°á»£c publish**

---

## Acceptance criteria

### AC-1: Happy Path - Thu há»“i lá»i má»i Ä‘ang chá» pháº£n há»“i thÃ nh cÃ´ng
- **Táº¡i** trang "Xem danh sÃ¡ch lá»i má»i" vá»›i lá»i má»i cÃ³ tráº¡ng thÃ¡i = **Äang chá» pháº£n há»“i**
- **Khi** Quáº£n trá»‹ viÃªn nhÃ  trÆ°á»ng nháº¥n nÃºt "Thu há»“i" trÃªn lá»i má»i Ä‘ang chá», nháº­p lÃ½ do thu há»“i (khÃ´ng báº¯t buá»™c) trong há»™p thoáº¡i xÃ¡c nháº­n, sau Ä‘Ã³ nháº¥n "XÃ¡c nháº­n thu há»“i"
- **ThÃ¬** há»‡ thá»‘ng:
  - Cáº­p nháº­t tráº¡ng thÃ¡i = **ÄÃ£ thu há»“i**
  - LÆ°u lÃ½ do thu há»“i (náº¿u cÃ³)
  - Há»§y quy trÃ¬nh tá»± Ä‘á»™ng náº¿u cÃ²n cháº¡y
  - VÃ´ hiá»‡u hÃ³a Ä‘Æ°á»ng dáº«n lá»i má»i (Ä‘Æ°á»ng dáº«n khÃ´ng hoáº¡t Ä‘á»™ng ná»¯a)
  - Gá»­i email thÃ´ng bÃ¡o cho giáº£ng viÃªn vá» viá»‡c thu há»“i
  - Gá»­i sá»± kiá»‡n "ÄÃ£ thu há»“i lá»i má»i giáº£ng viÃªn" vÃ o há»‡ thá»‘ng
  - Hiá»ƒn thá»‹ thÃ´ng bÃ¡o "ÄÃ£ thu há»“i lá»i má»i thÃ nh cÃ´ng cho [TÃªn giáº£ng viÃªn]"
  - Cáº­p nháº­t danh sÃ¡ch lá»i má»i vá»›i tráº¡ng thÃ¡i **ÄÃ£ thu há»“i**
  - KhÃ³a há»c Ä‘Æ°á»£c má»i khÃ´ng cÃ²n hiá»ƒn thá»‹ trong tab "Lá»i má»i Ä‘ang chá»" cá»§a giÃ¡o viÃªn Ä‘Æ°á»£c má»i

<!--### AC-2: Happy Path - Thu há»“i lá»i má»i Ä‘Ã£ cháº¥p nháº­n thÃ nh cÃ´ng (giáº£ng viÃªn Ä‘Ã£ cháº¥p nháº­n nhÆ°ng chÆ°a táº£i ná»™i dung)
- **Táº¡i** trang "Xem danh sÃ¡ch lá»i má»i" vá»›i lá»i má»i cÃ³ tráº¡ng thÃ¡i = **ÄÃ£ cháº¥p nháº­n** vÃ  khÃ³a há»c chÆ°a **ÄÃ£ xuáº¥t báº£n**
- **Khi** Quáº£n trá»‹ viÃªn nháº¥n nÃºt "Thu há»“i", xÃ¡c nháº­n vá»›i cáº£nh bÃ¡o "Giáº£ng viÃªn nÃ y Ä‘Ã£ cháº¥p nháº­n lá»i má»i. Báº¡n cÃ³ cháº¯c cháº¯n?", nháº­p lÃ½ do thu há»“i, nháº¥n "XÃ¡c nháº­n thu há»“i"
- **ThÃ¬** há»‡ thá»‘ng cáº­p nháº­t tráº¡ng thÃ¡i = **ÄÃ£ thu há»“i**, lÆ°u lÃ½ do thu há»“i, gá»¡ bá» quyá»n truy cáº­p cá»§a giáº£ng viÃªn vÃ o ná»™i dung khÃ³a há»c, gá»­i email thÃ´ng bÃ¡o, gá»­i sá»± kiá»‡n "ÄÃ£ thu há»“i lá»i má»i giáº£ng viÃªn", hiá»ƒn thá»‹ "ÄÃ£ thu há»“i lá»i má»i. ÄÃ£ gá»¡ bá» quyá»n truy cáº­p cá»§a giáº£ng viÃªn.", Quáº£n trá»‹ viÃªn cáº§n má»i giáº£ng viÃªn thay tháº¿ náº¿u lÃ  vai trÃ² Giáº£ng viÃªn chá»§ trÃ¬ -->

### AC-2: Validation - KhÃ´ng thá»ƒ thu há»“i sau khi Ä‘Ã£ cháº¥p nháº­n lá»i má»i thÃ nh cÃ´ng
- **Táº¡i** trang "Xem danh sÃ¡ch lá»i má»i" vá»›i lá»i má»i cÃ³ tráº¡ng thÃ¡i = **ÄÃ£ cháº¥p nháº­n** vÃ  khÃ³a há»c chÆ°a **ÄÃ£ xuáº¥t báº£n**
- **Khi** Quáº£n trá»‹ viÃªn cá»‘ gáº¯ng nháº¥n "Thu há»“i" cho báº¥t ká»³ lá»i má»i nÃ o
- **ThÃ¬** há»‡ thá»‘ng vÃ´ hiá»‡u hÃ³a nÃºt "Thu há»“i" cho táº¥t cáº£ lá»i má»i, náº¿u Quáº£n trá»‹ viÃªn váº«n kÃ­ch hoáº¡t thu há»“i (qua API) thÃ¬ tráº£ vá» lá»—i 400 "KhÃ´ng thá»ƒ thu há»“i lá»i má»i sau khi giáº£ng viÃªn cháº¥p nháº­n lá»i má»i", khÃ´ng thay Ä‘á»•i dá»¯ liá»‡u

### AC-3: Validation - KhÃ´ng thá»ƒ thu há»“i sau khi khÃ³a há»c Ä‘Ã£ xuáº¥t báº£n
- **Táº¡i** trang "Xem danh sÃ¡ch lá»i má»i" vá»›i tráº¡ng thÃ¡i khÃ³a há»c = **ÄÃ£ xuáº¥t báº£n**
- **Khi** Quáº£n trá»‹ viÃªn cá»‘ gáº¯ng nháº¥n "Thu há»“i" cho báº¥t ká»³ lá»i má»i nÃ o
- **ThÃ¬** há»‡ thá»‘ng vÃ´ hiá»‡u hÃ³a nÃºt "Thu há»“i" cho táº¥t cáº£ lá»i má»i, náº¿u Quáº£n trá»‹ viÃªn váº«n kÃ­ch hoáº¡t thu há»“i (qua API) thÃ¬ tráº£ vá» lá»—i 400 "KhÃ´ng thá»ƒ thu há»“i lá»i má»i sau khi khÃ³a há»c Ä‘Ã£ Ä‘Æ°á»£c xuáº¥t báº£n", khÃ´ng thay Ä‘á»•i dá»¯ liá»‡u

### AC-4: Validation - KhÃ´ng thá»ƒ thu há»“i lá»i má»i Ä‘Ã£ tá»« chá»‘i hoáº·c Ä‘Ã£ háº¿t háº¡n
- **Táº¡i** trang "Xem danh sÃ¡ch lá»i má»i"
- **Khi** Quáº£n trá»‹ viÃªn cá»‘ gáº¯ng thu há»“i lá»i má»i cÃ³ tráº¡ng thÃ¡i = **ÄÃ£ tá»« chá»‘i** hoáº·c **ÄÃ£ háº¿t háº¡n**
- **ThÃ¬** há»‡ thá»‘ng vÃ´ hiá»‡u hÃ³a nÃºt "Thu há»“i" cho nhá»¯ng lá»i má»i nÃ y, náº¿u Quáº£n trá»‹ viÃªn váº«n kÃ­ch hoáº¡t thu há»“i thÃ¬ tráº£ vá» lá»—i "KhÃ´ng thá»ƒ thu há»“i lá»i má»i cÃ³ tráº¡ng thÃ¡i [tráº¡ng thÃ¡i]. Chá»‰ lá»i má»i Ä‘ang chá» pháº£n há»“i hoáº·c Ä‘Ã£ cháº¥p nháº­n má»›i cÃ³ thá»ƒ thu há»“i"


### AC-6: Há»§y quy trÃ¬nh tá»± Ä‘á»™ng khi thu há»“i lá»i má»i Ä‘ang chá»
- **Táº¡i** há»‡ thá»‘ng backend khi thu há»“i lá»i má»i Ä‘ang chá»
- **Khi** há»‡ thá»‘ng xá»­ lÃ½ yÃªu cáº§u thu há»“i
- **ThÃ¬** há»‡ thá»‘ng xÃ¡c Ä‘á»‹nh phiÃªn báº£n quy trÃ¬nh tá»± Ä‘á»™ng Ä‘ang cháº¡y cho lá»i má»i nÃ y, há»§y quy trÃ¬nh Ä‘á»ƒ dá»«ng Ä‘á»“ng há»“ Ä‘áº¿m ngÆ°á»£c 7 ngÃ y, ghi nháº­n viá»‡c há»§y quy trÃ¬nh, Ä‘áº£m báº£o quy trÃ¬nh khÃ´ng tá»± Ä‘á»™ng kÃ­ch hoáº¡t **ÄÃ£ háº¿t háº¡n** sau Ä‘Ã³

### AC-7: VÃ´ hiá»‡u hÃ³a Ä‘Æ°á»ng dáº«n lá»i má»i khi thu há»“i
- **Táº¡i** há»‡ thá»‘ng backend khi thu há»“i lá»i má»i
- **Khi** há»‡ thá»‘ng cáº­p nháº­t tráº¡ng thÃ¡i = **ÄÃ£ thu há»“i**
- **ThÃ¬** mÃ£ lá»i má»i váº«n lÆ°u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u (Ä‘á»ƒ kiá»ƒm toÃ¡n), nhÆ°ng khi giáº£ng viÃªn nháº¥n vÃ o Ä‘Æ°á»ng dáº«n lá»i má»i thÃ¬ tráº£ vá» 410 Gone vá»›i thÃ´ng bÃ¡o "Lá»i má»i nÃ y Ä‘Ã£ bá»‹ thu há»“i bá»Ÿi quáº£n trá»‹ viÃªn khÃ³a há»c", khÃ´ng cho phÃ©p cháº¥p nháº­n/tá»« chá»‘i

### AC-8: Gá»­i email thÃ´ng bÃ¡o cho giáº£ng viÃªn khi thu há»“i
- **Táº¡i** dá»‹ch vá»¥ thÃ´ng bÃ¡o khi nháº­n sá»± kiá»‡n "ÄÃ£ thu há»“i lá»i má»i giáº£ng viÃªn"
- **Khi** sá»± kiá»‡n Ä‘Æ°á»£c xá»­ lÃ½ tá»« há»‡ thá»‘ng
- **ThÃ¬** há»‡ thá»‘ng gá»­i email Ä‘áº¿n giáº£ng viÃªn vá»›i tiÃªu Ä‘á» "Lá»i má»i khÃ³a há»c Ä‘Ã£ bá»‹ thu há»“i", ná»™i dung giáº£i thÃ­ch lá»i má»i Ä‘Ã£ bá»‹ thu há»“i, bao gá»“m lÃ½ do thu há»“i náº¿u Quáº£n trá»‹ viÃªn cÃ³ nháº­p, thÃ´ng tin liÃªn há»‡ Quáº£n trá»‹ viÃªn náº¿u giáº£ng viÃªn cÃ³ tháº¯c máº¯c

### AC-9: HoÃ n tÃ¡c giao dá»‹ch cÆ¡ sá»Ÿ dá»¯ liá»‡u náº¿u cÃ³ lá»—i
- **Táº¡i** há»‡ thá»‘ng backend khi xá»­ lÃ½ yÃªu cáº§u thu há»“i
- **Khi** cÃ³ lá»—i xáº£y ra trong quÃ¡ trÃ¬nh cáº­p nháº­t cÆ¡ sá»Ÿ dá»¯ liá»‡u hoáº·c há»§y quy trÃ¬nh
- **ThÃ¬** há»‡ thá»‘ng hoÃ n tÃ¡c toÃ n bá»™ giao dá»‹ch, tráº¡ng thÃ¡i lá»i má»i khÃ´ng thay Ä‘á»•i, hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i "KhÃ´ng thá»ƒ thu há»“i lá»i má»i. Vui lÃ²ng thá»­ láº¡i", ghi nháº­n lá»—i REVOKE-FAIL-001, cho phÃ©p Quáº£n trá»‹ viÃªn thá»­ láº¡i

### AC-10: Kiá»ƒm tra phÃ¢n quyá»n - Chá»‰ Quáº£n trá»‹ viÃªn nhÃ  trÆ°á»ng cá»§a khÃ³a há»c má»›i Ä‘Æ°á»£c thu há»“i
- **Táº¡i** API backend /api/invitations/{invitationId}/revoke
- **Khi** ngÆ°á»i dÃ¹ng khÃ´ng pháº£i Quáº£n trá»‹ viÃªn nhÃ  trÆ°á»ng cá»§a khÃ³a há»c cá»‘ gáº¯ng thu há»“i lá»i má»i
- **ThÃ¬** há»‡ thá»‘ng tráº£ vá» 403 KhÃ´ng cÃ³ quyá»n truy cáº­p vá»›i thÃ´ng bÃ¡o "Báº¡n khÃ´ng cÃ³ quyá»n thu há»“i lá»i má»i cho khÃ³a há»c nÃ y", ghi nháº­n láº¡i ná»— lá»±c truy cáº­p trÃ¡i phÃ©p vá»›i mÃ£ ngÆ°á»i dÃ¹ng vÃ  mÃ£ khÃ³a há»c

---

## Inline business rule

| TrÆ°á»ng thÃ´ng tin        | MÃ£ BR     | Business rule                                                          | Ghi chÃº                                    |
|-------------------------|-----------|------------------------------------------------------------------------|--------------------------------------------|
| Tráº¡ng thÃ¡i lá»i má»i      | BR-PS-081 | Chá»‰ lá»i má»i Ä‘ang chá» pháº£n há»“i hoáº·c Ä‘Ã£ cháº¥p nháº­n cÃ³ thá»ƒ thu há»“i        | Kiá»ƒm tra quan trá»ng                        |
| Tráº¡ng thÃ¡i khÃ³a há»c     | BR-INV-004 | KhÃ´ng thá»ƒ thu há»“i sau khi khÃ³a há»c Ä‘Ã£ xuáº¥t báº£n                         | RÃ ng buá»™c nghiá»‡p vá»¥                        |
| Tráº¡ng thÃ¡i lá»i má»i      | BR-PS-082 | Cáº­p nháº­t tá»« Äang chá»/ÄÃ£ cháº¥p nháº­n â†’ ÄÃ£ thu há»“i                         | Chuyá»ƒn tráº¡ng thÃ¡i                          |
| Vai trÃ² Giáº£ng viÃªn chá»§ trÃ¬ | BR-PS-083 | KhÃ´ng thá»ƒ thu há»“i Giáº£ng viÃªn chá»§ trÃ¬ duy nháº¥t Ä‘Ã£ cháº¥p nháº­n (pháº£i cÃ³ thay tháº¿) | Kiá»ƒm tra quan trá»ng               |
| MÃ£ lá»i má»i              | BR-PS-084 | MÃ£ lá»i má»i váº«n lÆ°u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u (Ä‘á»ƒ kiá»ƒm toÃ¡n) nhÆ°ng Ä‘Æ°á»ng dáº«n bá»‹ vÃ´ hiá»‡u hÃ³a | Dáº¥u váº¿t kiá»ƒm toÃ¡n          |
| LÃ½ do thu há»“i           | BR-PS-085 | KhÃ´ng báº¯t buá»™c, tá»‘i Ä‘a 2000 kÃ½ tá»±, há»— trá»£ tiáº¿ng Viá»‡t cÃ³ dáº¥u            | TrÆ°á»ng vÄƒn báº£n                             |
| Thá»i Ä‘iá»ƒm thu há»“i       | BR-PS-086 | Tá»± Ä‘á»™ng ghi nháº­n khi thu há»“i                                           | Dáº¥u thá»i gian kiá»ƒm toÃ¡n                    |
| NgÆ°á»i thu há»“i           | BR-PS-087 | LÆ°u mÃ£ cá»§a Quáº£n trá»‹ viÃªn thá»±c hiá»‡n thu há»“i                             | Dáº¥u váº¿t kiá»ƒm toÃ¡n                          |
| Quy trÃ¬nh tá»± Ä‘á»™ng       | BR-PS-088 | Há»§y quy trÃ¬nh náº¿u lá»i má»i Ä‘ang chá» (dá»«ng Ä‘á»“ng há»“ Ä‘áº¿m ngÆ°á»£c)           | Quáº£n lÃ½ quy trÃ¬nh                          |
| Quyá»n truy cáº­p          | BR-PS-089 | Gá»¡ bá» quyá»n truy cáº­p cá»§a giáº£ng viÃªn vÃ o ná»™i dung khÃ³a há»c náº¿u thu há»“i Ä‘Ã£ cháº¥p nháº­n | Báº£o máº­t                     |
| ThÃ´ng bÃ¡o email         | BR-PS-090 | Gá»­i email thÃ´ng bÃ¡o cho giáº£ng viÃªn khi thu há»“i                         | Giao tiáº¿p ngÆ°á»i dÃ¹ng                       |
| Tráº¡ng thÃ¡i khÃ³a há»c     | BR-PS-091 | Tráº¡ng thÃ¡i khÃ³a há»c khÃ´ng pháº£i 'ÄÃ£ xuáº¥t báº£n', 'ÄÃ£ lÆ°u trá»¯'             | Kiá»ƒm tra nghiá»‡p vá»¥                         |
| Sá»± kiá»‡n há»‡ thá»‘ng        | BR-PS-092 | Gá»­i sá»± kiá»‡n "ÄÃ£ thu há»“i lá»i má»i giáº£ng viÃªn" khi thu há»“i thÃ nh cÃ´ng    | Kiáº¿n trÃºc hÆ°á»›ng sá»± kiá»‡n                    |

---

## Format Email ##

### Email má»i giÃ¡o viÃªn biÃªn soáº¡n khÃ³a há»c 

**Subject:** Má»i báº¡n tham gia biÃªn soáº¡n vÃ  giáº£ng dáº¡y khÃ³a há»c â€œ[TÃªn khÃ³a há»c]â€

**Body:**
```
ChÃ o [TÃªn giáº£ng viÃªn],

ChÃºng tÃ´i xin thÃ´ng bÃ¡o ráº±ng lá»i má»i báº¡n tham gia giáº£ng dáº¡y khÃ³a há»c â€œ[TÃªn khÃ³a há»c]â€ Ä‘Ã£ Ä‘Æ°á»£c thu há»“i bá»Ÿi Quáº£n trá»‹ viÃªn cá»§a trÆ°á»ng.

LÃ½ do thu há»“i (náº¿u cÃ³):
"[LÃ½ do thu há»“i]"

Viá»‡c thu há»“i cÃ³ thá»ƒ xuáº¥t phÃ¡t tá»«:
- Äiá»u chá»‰nh láº¡i káº¿ hoáº¡ch xÃ¢y dá»±ng Ä‘á»™i ngÅ© giáº£ng dáº¡y
- Thay Ä‘á»•i ná»™i dung, pháº¡m vi hoáº·c cáº¥u trÃºc khÃ³a há»c
- KhÃ³a há»c cáº§n Ä‘Æ°á»£c sáº¯p xáº¿p láº¡i trÆ°á»›c khi xuáº¥t báº£n

ÄÆ°á»ng dáº«n lá»i má»i cÅ© hiá»‡n khÃ´ng cÃ²n hiá»‡u lá»±c.

Náº¿u báº¡n cÃ³ tháº¯c máº¯c hoáº·c cáº§n trao Ä‘á»•i thÃªm, vui lÃ²ng liÃªn há»‡:
[Email]  
[Sá»‘ Ä‘iá»‡n thoáº¡i]

Cáº£m Æ¡n báº¡n Ä‘Ã£ quan tÃ¢m vÃ  Ä‘á»“ng hÃ nh cÃ¹ng [TÃªn trÆ°á»ng / tá»• chá»©c].

TrÃ¢n trá»ng,  
[TÃªn trÆ°á»ng / tá»• chá»©c]

```
**Trong Ä‘Ã³:**
- [TÃªn khÃ³a há»c]: TÃªn khÃ³a há»c dÃ¹ng Ä‘á»ƒ má»i giáº£ng viÃªn
- [TÃªn giáº£ng viÃªn]: TÃªn giáº£ng viÃªn Ä‘Æ°á»£c má»i
- [TÃªn trÆ°á»ng/Tá»• chá»©c]: TÃªn nhÃ  trÆ°á»ng/ tá»• chá»©c Social School
- [LÃ½ do thu há»“i]: LÃ½ do thu há»“i lá»i má»i náº¿u cÃ³
- [Email]: cáº¥u hÃ¬nh: email cá»§a nhÃ  trÆ°á»ng/ tá»• chá»©c Social school
- [Sá»‘ Ä‘iá»‡n thoáº¡i]: sá»‘ Ä‘iá»‡n thoáº¡i cá»§a nhÃ  trÆ°á»ng/ tá»• chá»©c Social school
---

## System rule
- MÃ£ lá»i má»i giáº£ng viÃªn khÃ´ng thay Ä‘á»•i (cÃ¹ng báº£n ghi, chá»‰ cáº­p nháº­t tráº¡ng thÃ¡i)
- Kiá»ƒm tra Ä‘Æ°á»ng dáº«n lá»i má»i: kiá»ƒm tra tráº¡ng thÃ¡i thuá»™c (Äang chá» pháº£n há»“i, ÄÃ£ cháº¥p nháº­n) trÆ°á»›c khi cho phÃ©p cháº¥p nháº­n/tá»« chá»‘i
- Tráº¡ng thÃ¡i khÃ³a há»c khÃ´ng thay Ä‘á»•i khi thu há»“i (trá»« khi táº¥t cáº£ giáº£ng viÃªn Ä‘á»u bá»‹ thu há»“i thÃ¬ cÃ³ thá»ƒ quay láº¡i Báº£n nhÃ¡p)
- BÆ°á»›c quy trÃ¬nh cÃ³ thá»ƒ quay láº¡i Má»i giáº£ng viÃªn náº¿u táº¥t cáº£ giáº£ng viÃªn Ä‘Ã£ cháº¥p nháº­n Ä‘á»u bá»‹ thu há»“i
- Náº¿u thu há»“i Giáº£ng viÃªn chá»§ trÃ¬ Ä‘Ã£ cháº¥p nháº­n: Quáº£n trá»‹ viÃªn pháº£i má»i ngÆ°á»i thay tháº¿ trÆ°á»›c khi khÃ³a há»c cÃ³ thá»ƒ tiáº¿p tá»¥c quy trÃ¬nh

---

## Business Value & Success Metrics
Story nÃ y sáº½ cung cáº¥p **kháº£ nÄƒng cho School Admin linh hoáº¡t quáº£n lÃ½ Ä‘á»™i ngÅ© giáº£ng dáº¡y, Ä‘iá»u chá»‰nh invitation khi cáº§n, maintain control over course instructor team trÆ°á»›c khi publish**
Trá»ng sá»‘ cá»§a story nÃ y lÃ  **5**

Story Ä‘Æ°á»£c coi lÃ  thÃ nh cÃ´ng khi nÃ³ Ä‘áº£m báº£o Ä‘Æ°á»£c:
- Quáº£n trá»‹ viÃªn cÃ³ thá»ƒ thu há»“i lá»i má»i trong vÃ²ng 30 giÃ¢y
- Tá»· lá»‡ thu há»“i thÃ nh cÃ´ng >= 98%
- Tá»· lá»‡ gá»­i email thÃ´ng bÃ¡o >= 95%
- ÄÆ°á»ng dáº«n lá»i má»i bá»‹ vÃ´ hiá»‡u hÃ³a tráº£ vá» thÃ´ng bÃ¡o lá»—i chÃ­nh xÃ¡c 100% (báº£o máº­t)
- Trung bÃ¬nh < 5% lá»i má»i bá»‹ thu há»“i (tá»· lá»‡ tháº¥p lÃ  tá»‘t, chá»©ng tá» láº­p káº¿ hoáº¡ch tá»‘t)

---

## Dependencies
- **lf-course service**: Cáº­p nháº­t tráº¡ng thÃ¡i lá»i má»i giáº£ng viÃªn, kiá»ƒm tra business rules
- **notification-service**: Gá»­i email thÃ´ng bÃ¡o thu há»“i
- **US-PS-003**: Lá»i má»i pháº£i Ä‘Ã£ Ä‘Æ°á»£c táº¡o trÆ°á»›c
- **Access control service**: Gá»¡ bá» quyá»n truy cáº­p cá»§a giáº£ng viÃªn vÃ o khÃ³a há»c náº¿u thu há»“i lá»i má»i Ä‘Ã£ cháº¥p nháº­n

---

## Impact Analysis
- **Frontend (ReactJS/NextJS)**:
  - NÃºt "Thu há»“i" chá»‰ hiá»ƒn thá»‹ cho lá»i má»i Äang chá» pháº£n há»“i vÃ  ÄÃ£ cháº¥p nháº­n
  - VÃ´ hiá»‡u hÃ³a nÃºt "Thu há»“i" náº¿u tráº¡ng thÃ¡i khÃ³a há»c = ÄÃ£ xuáº¥t báº£n
  - Há»™p thoáº¡i cáº£nh bÃ¡o khÃ¡c nhau cho Äang chá» pháº£n há»“i vÃ  ÄÃ£ cháº¥p nháº­n:
    - Äang chá» pháº£n há»“i: "Thu há»“i lá»i má»i cho [TÃªn]?"
    - ÄÃ£ cháº¥p nháº­n: "Giáº£ng viÃªn nÃ y Ä‘Ã£ cháº¥p nháº­n. Thu há»“i sáº½ gá»¡ bá» quyá»n truy cáº­p cá»§a há». Tiáº¿p tá»¥c?"
  - Ã” vÄƒn báº£n tÃ¹y chá»n Ä‘á»ƒ nháº­p lÃ½ do thu há»“i
  - Cáº£nh bÃ¡o Ä‘áº·c biá»‡t náº¿u thu há»“i Giáº£ng viÃªn chá»§ trÃ¬ duy nháº¥t: "KhÃ´ng thá»ƒ thu há»“i Giáº£ng viÃªn chá»§ trÃ¬ duy nháº¥t"
  - ThÃ´ng bÃ¡o thÃ nh cÃ´ng: "ÄÃ£ thu há»“i lá»i má»i thÃ nh cÃ´ng"
  - Cáº­p nháº­t danh sÃ¡ch theo thá»i gian thá»±c: tráº¡ng thÃ¡i â†’ ÄÃ£ thu há»“i

- **Backend**:
  - API endpoint thu há»“i lá»i má»i
  - Validation logic:
    - Kiá»ƒm tra tráº¡ng thÃ¡i hiá»‡n táº¡i thuá»™c (Äang chá» pháº£n há»“i, ÄÃ£ cháº¥p nháº­n)
    - Kiá»ƒm tra tráº¡ng thÃ¡i khÃ³a há»c khÃ´ng thuá»™c (ÄÃ£ xuáº¥t báº£n, ÄÃ£ lÆ°u trá»¯)
    - Náº¿u vai trÃ² = Giáº£ng viÃªn chá»§ trÃ¬ vÃ  tráº¡ng thÃ¡i = ÄÃ£ cháº¥p nháº­n: kiá»ƒm tra cÃ³ Giáº£ng viÃªn chá»§ trÃ¬ khÃ¡c Ä‘Ã£ cháº¥p nháº­n khÃ´ng
  - Business logic:
    - Cáº­p nháº­t báº£n ghi lá»i má»i giáº£ng viÃªn (tráº¡ng thÃ¡i, lÃ½ do thu há»“i)
    - Gá»¡ bá» quyá»n truy cáº­p cá»§a giáº£ng viÃªn (gá»i access-control-service)
    - Gá»­i thÃ´ng bÃ¡o email

- **Access Control**:
  - Náº¿u thu há»“i lá»i má»i Ä‘Ã£ cháº¥p nháº­n:
    - Gá»¡ bá» giáº£ng viÃªn khá»i báº£ng quyá»n truy cáº­p
    - Thu há»“i quyá»n xem/chá»‰nh sá»­a ná»™i dung khÃ³a há»c
    - Ghi nháº­n sá»± kiá»‡n thu há»“i quyá»n truy cáº­p

- **Business Process**:
  - Tráº¡ng thÃ¡i lá»i má»i: Äang chá» pháº£n há»“i/ÄÃ£ cháº¥p nháº­n â†’ ÄÃ£ thu há»“i
  - Quyá»n truy cáº­p cá»§a giáº£ng viÃªn bá»‹ gá»¡ bá» (Ä‘á»‘i vá»›i ÄÃ£ cháº¥p nháº­n)
  - Email thÃ´ng bÃ¡o Ä‘Æ°á»£c gá»­i
  - ÄÆ°á»ng dáº«n lá»i má»i bá»‹ vÃ´ hiá»‡u hÃ³a
  - Quáº£n trá»‹ viÃªn cÃ³ thá»ƒ má»i giáº£ng viÃªn thay tháº¿ sau khi thu há»“i
  - Náº¿u thu há»“i Giáº£ng viÃªn chá»§ trÃ¬: quy trÃ¬nh cÃ³ thá»ƒ quay láº¡i bÆ°á»›c Má»i giáº£ng viÃªn

---

## UI/UX Design

### View Invitations Page vá»›i Revoke Button
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Course: Advanced Mathematics | Status: INVITING_INSTRUCTORS     â”‚
â”‚ Invited Instructors (4)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [ğŸ‘¤] Nguyá»…n VÄƒn A | OWNER                                  â”‚ â”‚
â”‚  â”‚ Status: ACCEPTED âœ“                                         â”‚ â”‚
â”‚  â”‚ Invited: Dec 6, 2025 | Accepted: Dec 7, 2025              â”‚ â”‚
â”‚  â”‚ [View Details] [Revoke]                                    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ [ğŸ‘¤] Tráº§n Thá»‹ B | CONTRIBUTOR                              â”‚ â”‚
â”‚  â”‚ Status: PENDING â³ | Expires in: 5 days                    â”‚ â”‚
â”‚  â”‚ Invited: Dec 8, 2025                                       â”‚ â”‚
â”‚  â”‚ [View Details] [Revoke]                                    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ [ğŸ‘¤] LÃª VÄƒn C | CONTRIBUTOR                                â”‚ â”‚
â”‚  â”‚ Status: EXPIRED âš ï¸                                          â”‚ â”‚
â”‚  â”‚ Invited: Nov 29, 2025 | Expired: Dec 6, 2025              â”‚ â”‚
â”‚  â”‚ [View Details] [Resend]                                    â”‚ â”‚
â”‚  â”‚ (Revoke button disabled - cannot revoke EXPIRED)          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ [ğŸ‘¤] Pháº¡m Thá»‹ D | REVIEWER                                 â”‚ â”‚
â”‚  â”‚ Status: REJECTED âœ—                                         â”‚ â”‚
â”‚  â”‚ [View Details]                                             â”‚ â”‚
â”‚  â”‚ (Revoke button disabled - cannot revoke REJECTED)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Revoke Confirmation Dialog - PENDING Invitation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Revoke Invitation                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  Revoke invitation to:                   â”‚
â”‚  Tráº§n Thá»‹ B (tranthib@example.com)       â”‚
â”‚                                          â”‚
â”‚  Details:                                â”‚
â”‚  â€¢ Role: CONTRIBUTOR                     â”‚
â”‚  â€¢ Status: PENDING                       â”‚
â”‚  â€¢ Invited: Dec 8, 2025                  â”‚
â”‚                                          â”‚
â”‚  The invitation will be cancelled and    â”‚
â”‚  the instructor will be notified.        â”‚
â”‚                                          â”‚
â”‚  Reason for revocation (optional):       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Tháº§y khÃ´ng cÃ²n phÃ¹ há»£p vá»›i khÃ³a há»câ”‚  â”‚
â”‚  â”‚                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  (Max 2000 characters)                   â”‚
â”‚                                          â”‚
â”‚           [Cancel] [Confirm Revoke]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Revoke Confirmation Dialog - ACCEPTED Invitation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸  Revoke Accepted Invitation           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  Revoke invitation to:                   â”‚
â”‚  Nguyá»…n VÄƒn A (nguyenvana@example.com)   â”‚
â”‚                                          â”‚
â”‚  âš ï¸  WARNING:                             â”‚
â”‚  This instructor has already ACCEPTED    â”‚
â”‚  the invitation.                         â”‚
â”‚                                          â”‚
â”‚  Details:                                â”‚
â”‚  â€¢ Role: OWNER                           â”‚
â”‚  â€¢ Status: ACCEPTED                      â”‚
â”‚  â€¢ Accepted: Dec 7, 2025                 â”‚
â”‚                                          â”‚
â”‚  Revoking will:                          â”‚
â”‚  â€¢ Remove instructor's access to course  â”‚
â”‚  â€¢ Cancel any work in progress           â”‚
â”‚  â€¢ Notify the instructor                 â”‚
â”‚                                          â”‚
â”‚  You will need to invite a replacement   â”‚
â”‚  OWNER instructor.                       â”‚
â”‚                                          â”‚
â”‚  Reason for revocation (optional):       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â”‚  Are you sure you want to continue?      â”‚
â”‚                                          â”‚
â”‚           [Cancel] [Yes, Revoke]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Error Dialog - Cannot Revoke Only OWNER
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ— Cannot Revoke Invitation                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  Cannot revoke the only accepted OWNER         â”‚
â”‚  instructor.                                   â”‚
â”‚                                                â”‚
â”‚  Course: Advanced Mathematics                  â”‚
â”‚  Instructor: Nguyá»…n VÄƒn A (OWNER, ACCEPTED)    â”‚
â”‚                                                â”‚
â”‚  To revoke this instructor:                    â”‚
â”‚  1. First invite a replacement OWNER           â”‚
â”‚  2. Wait for the replacement to ACCEPT         â”‚
â”‚  3. Then you can revoke this invitation        â”‚
â”‚                                                â”‚
â”‚  A course must always have at least one        â”‚
â”‚  accepted OWNER instructor.                    â”‚
â”‚                                                â”‚
â”‚                              [OK]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Success Message
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Invitation Revoked Successfully             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  Invitation has been revoked for:              â”‚
â”‚  Tráº§n Thá»‹ B (tranthib@example.com)             â”‚
â”‚                                                â”‚
â”‚  Details:                                      â”‚
â”‚  â€¢ Status: REVOKED                             â”‚
â”‚  â€¢ Revoked at: Dec 13, 2025 at 4:45 PM         â”‚
â”‚  â€¢ Instructor access removed                   â”‚
â”‚  â€¢ Email notification sent                     â”‚
â”‚                                                â”‚
â”‚  The instructor can no longer accept this      â”‚
â”‚  invitation.                                   â”‚
â”‚                                                â”‚
â”‚                              [OK]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**UI States**:
- "Revoke" button visible for PENDING and ACCEPTED invitations only
- "Revoke" button disabled for REJECTED, EXPIRED, REVOKED invitations
- "Revoke" button disabled if course.status = PUBLISHED
- Different confirmation dialogs for PENDING vs ACCEPTED
- Special error dialog if trying to revoke only OWNER
- Real-time update: status badge changes to REVOKED after success

---

## Out of Scope Item
- **Instructor Role**: CONTRIBUTOR, REVIEWER
- **Undo revoke**: KhÃ´i phá»¥c invitation Ä‘Ã£ revoke (phá»©c táº¡p - Admin pháº£i invite láº¡i)
- **Bulk revoke**: Revoke nhiá»u invitations cÃ¹ng lÃºc (cÃ³ thá»ƒ lÃ m sau)
- **Revoke with replacement suggestion**: Tá»± Ä‘á»™ng suggest replacement instructors khi revoke (AI feature - out of scope)
- **Revoke approval workflow**: Require approval tá»« higher-level admin trÆ°á»›c khi revoke ACCEPTED invitation (workflow phá»©c táº¡p - out of scope)
- **Revoke analytics**: Track revoke rate, reasons, patterns (analytics - out of scope)
- **Compensation for revoked instructors**: TÃ­nh toÃ¡n compensation náº¿u instructor Ä‘Ã£ bá» cÃ´ng sá»©c (business process - out of scope)
- **Revoke appeal process**: Instructor cÃ³ thá»ƒ appeal revoke decision (legal/HR process - out of scope)
- **Partial revoke**: Revoke má»™t pháº§n contribution_scope thay vÃ¬ toÃ n bá»™ invitation (phá»©c táº¡p - Admin pháº£i revoke vÃ  invite láº¡i vá»›i scope má»›i)
